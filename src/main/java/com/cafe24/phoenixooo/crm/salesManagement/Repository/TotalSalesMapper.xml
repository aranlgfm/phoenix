<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cafe24.phoenixooo.crm.salesManagement.Repository.TotalSalesMapper">

	<select id="SelectDailySales" parameterType="String" resultType="com.cafe24.phoenixooo.crm.salesManagement.Model.DaySalesInfo">
		SELECT
			ITEMDESIGN_NM as itemDesignName
			,PAYMENT_TYPE_GB as paymentTypeGb
		    ,if(PAYMENT_TYPE_GB = '현금', sum(PAYMENT_TOTAL_WON),0) as totalCash
		    ,if(PAYMENT_TYPE_GB = '현금', count(PAYMENT_TOTAL_WON),0) as countCash
		    
		    ,if(PAYMENT_TYPE_GB = '카드', sum(PAYMENT_TOTAL_WON),0) as totalCard
		    ,if(PAYMENT_TYPE_GB = '카드', count(PAYMENT_TOTAL_WON),0) as countCard
		   ,PAYMENT_DT as paymentDate
		FROM
			CRM_PAYMENT_TB
		WHERE PAYMENT_DT = #{paymentDate}
		GROUP BY
			ITEMDESIGN_NM, PAYMENT_TYPE_GB
			
				
	</select>

	<select id="selectMonthlyList" parameterType="com.cafe24.phoenixooo.crm.salesManagement.Model.MonthSalesInfo" resultType="com.cafe24.phoenixooo.crm.salesManagement.Model.MonthSalesInfo">
		SELECT
			PAYMENT_DT as paymentDate
			,PAYMENT_TYPE_GB as paymentTypeGb
		    ,if(PAYMENT_TYPE_GB = '현금', sum(PAYMENT_TOTAL_WON),0) as totalCash
		    ,if(PAYMENT_TYPE_GB = '현금', count(PAYMENT_TOTAL_WON),0) as countCash
		    ,if(PAYMENT_TYPE_GB = '카드', sum(PAYMENT_TOTAL_WON),0) as totalCard
		    ,if(PAYMENT_TYPE_GB = '카드', count(PAYMENT_TOTAL_WON),0) as countCard
		   
		FROM
			CRM_PAYMENT_TB
		WHERE PAYMENT_DT between #{paymentStartDay} and #{paymentEndDay}
		GROUP BY
			PAYMENT_DT, PAYMENT_TYPE_GB 
	</select>





</mapper>